(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ArticleCategory"],{"0916":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-button",{attrs:{type:"primary"},on:{click:t.append}},[t._v("添加分类")]),a("a-button",{on:{click:function(e){return t.updateAll(!1)}}},[t._v("生成所有分类HTML")]),a("a-button",{on:{click:function(e){return t.updateAll(!0)}}},[t._v("生成所有分类HTML更新模板")]),a("a-table",{staticClass:"table",attrs:{columns:t.columns,dataSource:t.categorys,pagination:!1,rowKey:function(t){return t.id},size:"small",scroll:{x:1500}},scopedSlots:t._u([{key:"name",fn:function(e,n){return a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.preview(n.id)}}},[t._v(t._s(e))])}},{key:"viewName",fn:function(e,n){return a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.openHtml(n)}}},[t._v(t._s(e))])}},{key:"firstArticle",fn:function(e,n){return a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.openHtmlFirstArticle(n)}}},[t._v(t._s(e))])}},{key:"recommend",fn:function(e,n){return a("div",{},[a("a-switch",{attrs:{defaultChecked:""},on:{change:function(e){return t.onChange(n.id)}},model:{value:n.recommend,callback:function(e){t.$set(n,"recommend",e)},expression:"record.recommend"}})],1)}},{key:"existNav",fn:function(e,n){return a("div",{},[a("a-switch",{attrs:{defaultChecked:""},on:{change:function(e){return t.onChangeNav(n.id)}},model:{value:n.existNav,callback:function(e){t.$set(n,"existNav",e)},expression:"record.existNav"}})],1)}},{key:"haveHtml",fn:function(e,n){return a("div",{},[a("a-switch",{attrs:{defaultChecked:""},on:{change:function(e){return t.onChangeHtml(n.id)}},model:{value:n.haveHtml,callback:function(e){t.$set(n,"haveHtml",e)},expression:"record.haveHtml"}})],1)}},{key:"action",fn:function(e,n){return a("span",{},[a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.articleListShow(n.id)}}},[t._v("查看文章")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.generateHtml(n.id)}}},[t._v("生成HTML")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{href:"javascript:;"},on:{click:function(){return t.edit(n.id)}}},[t._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.remove(n.id)}}},[t._v("删除分类")])],1)}}])}),a("a-modal",{attrs:{title:"添加分类"},on:{ok:t.handleOk},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("a-form-item",{attrs:{label:"一页文章数量"}},[a("a-input-number",{attrs:{id:"inputNumber"},model:{value:t.categoryParam.articleListSize,callback:function(e){t.$set(t.categoryParam,"articleListSize",e)},expression:"categoryParam.articleListSize"}})],1),a("a-switch",{attrs:{defaultChecked:""},model:{value:t.categoryParam.desc,callback:function(e){t.$set(t.categoryParam,"desc",e)},expression:"categoryParam.desc"}}),a("a-form",{attrs:{layout:"horizontal"}},[a("a-form-item",{attrs:{label:"视图的名称",help:"不输入.默认生成"}},[a("a-input",{model:{value:t.categoryParam.viewName,callback:function(e){t.$set(t.categoryParam,"viewName",e)},expression:"categoryParam.viewName"}})],1),a("a-form-item",{attrs:{label:"分类名称"}},[a("a-input",{model:{value:t.categoryParam.name,callback:function(e){t.$set(t.categoryParam,"name",e)},expression:"categoryParam.name"}})],1),a("a-form-item",{attrs:{label:"选择分类信息模板"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.categoryParam.templateName,callback:function(e){t.$set(t.categoryParam,"templateName",e)},expression:"categoryParam.templateName"}},t._l(t.templates,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.enName}},[t._v(t._s(e.name))])})),1)],1),a("a-form-item",{attrs:{label:"选择文章显示的模板"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.categoryParam.articleTemplateName,callback:function(e){t.$set(t.categoryParam,"articleTemplateName",e)},expression:"categoryParam.articleTemplateName"}},t._l(t.articleTemplate,(function(e){return a("a-select-option",{key:e.enName,attrs:{value:e.enName}},[t._v(t._s(e.name))])})),1)],1),a("a-form-item",{attrs:{label:"分类的描述"}},[a("a-textarea",{model:{value:t.categoryParam.description,callback:function(e){t.$set(t.categoryParam,"description",e)},expression:"categoryParam.description"}})],1),a("a-form-item",[a("a-upload-dragger",{attrs:{name:"file",multiple:!0,action:t.upload,headers:t.headers,withCredentials:!0},on:{change:t.handleChange}},[a("p",{staticClass:"ant-upload-drag-icon"},[a("img",{attrs:{src:t.categoryParam.picPath,width:"100%",alt:"",srcset:""}})]),a("p",{staticClass:"ant-upload-text"}),a("p",{staticClass:"ant-upload-hint"},[t._v("Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files")])]),a("a-input",{attrs:{placeholder:"直接粘贴图片路径"},model:{value:t.categoryParam.picPath,callback:function(e){t.$set(t.categoryParam,"picPath",e)},expression:"categoryParam.picPath"}})],1),a("a-form-item",{attrs:{label:"父ID"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.categoryParam.parentId,callback:function(e){t.$set(t.categoryParam,"parentId",e)},expression:"categoryParam.parentId"}},t._l(t.categorys,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1),a("a-form-item",{attrs:{label:"排序"}},[a("a-input",{model:{value:t.categoryParam.order,callback:function(e){t.$set(t.categoryParam,"order",e)},expression:"categoryParam.order"}})],1)],1)],1),a("a-drawer",{attrs:{title:"文章列表",placement:"right",closable:!0,visible:t.articleListDrawer,width:"40rem"},on:{close:function(){t.articleListDrawer=!1}}},[a("a-list",{attrs:{bordered:"",dataSource:t.articles},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{},[a("a-input-number",{attrs:{slot:"actions"},slot:"actions",model:{value:e.order,callback:function(a){t.$set(e,"order",a)},expression:"item.order"}}),a("a",{attrs:{slot:"actions"},on:{click:function(a){return t.updateArticleOrder(e.id,e.order)}},slot:"actions"},[t._v("更新文章Order")]),a("a-list-item-meta",{attrs:{description:e.content}},[a("a",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.title))])])],1)}}])})],1)],1)},r=[],c=(a("b0c0"),a("c405")),o=a("c621"),i=a("5c07"),l=a("a796"),s=a("2423"),u=[{title:"名称",dataIndex:"name",key:"name",scopedSlots:{customRender:"name"}},{title:"视图名称",dataIndex:"viewName",key:"viewName",scopedSlots:{customRender:"viewName"}},{title:"category模板",dataIndex:"templateName",key:"templateName"},{title:"文章模板",dataIndex:"articleTemplateName",key:"articleTemplateName"},{title:"是否推荐首页",dataIndex:"recommend",key:"recommend",scopedSlots:{customRender:"recommend"}},{title:"是否添加到导航",dataIndex:"existNav",key:"existNav",scopedSlots:{customRender:"existNav"}},{title:"是否生成Html",dataIndex:"haveHtml",key:"haveHtml",scopedSlots:{customRender:"haveHtml"}},{title:"Action",key:"action",fixed:"right",scopedSlots:{customRender:"action"}}],d={data:function(){return{columns:u,form:this.$form.createForm(this,{name:"123"}),categorys:[],parentCategory:[],articles:[],templates:[],articleTemplate:[],isUpdate:!1,updateId:null,visible:!1,currentTabId:null,articleListDrawer:!1,categoryId:null,categoryParam:{order:0,name:"",templateName:"",viewName:"",description:"",picPath:"",articleTemplateName:"",firstArticle:"",articleListSize:10,desc:!0,parentId:0}}},created:function(){this.loadcategory()},computed:{upload:function(){return l["a"].upload()},headers:function(){var t=localStorage.getItem("jwtToken");return{Authorization:"Bearer "+t}}},methods:{loadTempalte:function(){var t=this;o["a"].findByType("CATEGORY").then((function(e){t.templates=e.data.data}))},loadArticleTempalte:function(){var t=this;o["a"].findByType("ARTICLE").then((function(e){t.articleTemplate=e.data.data}))},loadcategory:function(){var t=this;c["a"].listTree().then((function(e){t.categorys=e.data.data}))},loadParentCategory:function(){var t=this;o["a"].findByType("CATEGORY").then((function(e){t.templates=e.data.data,t.loadcategory(t.templates[0].enName)}))},loadArticle:function(t){var e=this;s["a"].pageDtoBy(t).then((function(t){e.articles=t.data.data.content}))},articleListShow:function(t){this.categoryId=t,this.loadArticle(t),this.articleListDrawer=!0},updateArticleOrder:function(t,e){var a=this;s["a"].updateOrderBy(t,e).then((function(t){a.$notification["success"]({message:"成功更改文章"+t.data.data.title+"的顺序!"}),a.loadArticle(a.categoryId)}))},handleChange:function(t){var e=t.file.status;"done"===e?(this.categoryParam.picPath=t.file.response.data.path,this.$message.success("".concat(t.file.name," file uploaded successfully."))):"error"===e&&this.$message.error("".concat(t.file.name," file upload failed."))},handleOk:function(){var t=this;this.categoryParam.name?(this.isUpdate?c["a"].update(this.updateId,this.categoryParam).then((function(e){t.$notification["success"]({message:"成功更新数据:"+e.data.data.name}),t.loadcategory()})):c["a"].add(this.categoryParam).then((function(e){t.$notification["success"]({message:"成功添加:"+e.data.data.name}),t.loadcategory()})),this.visible=!1):this.$notification["error"]({message:"分类标题不能为空!!"})},append:function(){this.loadTempalte(),this.loadArticleTempalte(),this.isUpdate=!1,this.visible=!0},edit:function(t){var e=this;this.loadTempalte(),this.loadArticleTempalte(),this.isUpdate=!0,this.updateId=t,c["a"].findById(t).then((function(t){e.categoryParam=t.data.data,e.visible=!0}))},onChange:function(t){var e=this;c["a"].recommendOrCancel(t).then((function(t){t.data.data.recommend?e.$notification["success"]({message:"分类"+t.data.data.name+"成功在首页推荐!!"}):e.$notification["success"]({message:"分类"+t.data.data.name+"已经从首页取消推荐!!"})}))},onChangeNav:function(t){var e=this;c["a"].addOrRemoveToMenu(t).then((function(t){t.data.data.existNav?e.$notification["success"]({message:"成功添加"+t.data.data.name+"到导航!!"}):e.$notification["success"]({message:"成功移除"+t.data.data.name+"到导航!!"})}))},onChangeHtml:function(t){var e=this;c["a"].haveHtml(t).then((function(t){var a=t.data.data;a.haveHtml?e.$notification["success"]({message:"成功生成"+a.name+"Html"}):e.$notification["success"]({message:"成功移除"+a.name+"Html"}),e.loadcategory()}))},remove:function(t){var e=this;c["a"].deleteById(t).then((function(t){e.$notification["success"]({message:t.data.message}),e.loadcategory(e.currentTabId)}))},preview:function(t){window.open(i["a"].Online("category",t),"_blank")},openHtml:function(t){t.haveHtml?window.open(i["a"].Html(t.path+"/"+t.viewName),"_blank"):this.$message.error("该分类没有生成HTML")},openHtmlFirstArticle:function(t){t.haveHtml?window.open(i["a"].Html(t.path+"/"+t.viewName+"/"+t.firstArticle),"_blank"):this.$message.error("该分类没有生成HTML")},onClose:function(){this.articleVisible=!1},generateHtml:function(t){var e=this;c["a"].generateHtml(t).then((function(t){e.$notification["success"]({message:"成功生成"+t.data.data.name+"的HTML"})}))},updateAll:function(t){var e=this;this.$confirm({title:"你确定生成所有栏目HTML?",content:"Some descriptions",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){t?c["a"].updateAll({more:!0}).then((function(t){e.$notification["success"]({message:"成功生成栏目Id为:"+t.data.data+"的HTML页面"}),e.loadcategory(e.currentTabId)})):c["a"].updateAll().then((function(t){e.$notification["success"]({message:"成功生成栏目Id为:"+t.data.data+"的HTML页面"}),e.loadcategory(e.currentTabId)}))},onCancel:function(){}})}}},m=d,f=(a("1dda"),a("2877")),p=Object(f["a"])(m,n,r,!1,null,null,null);e["default"]=p.exports},"159b":function(t,e,a){var n=a("da84"),r=a("fdbc"),c=a("17c2"),o=a("9112");for(var i in r){var l=n[i],s=l&&l.prototype;if(s&&s.forEach!==c)try{o(s,"forEach",c)}catch(u){s.forEach=c}}},"17c2":function(t,e,a){"use strict";var n=a("b727").forEach,r=a("a640"),c=a("ae40"),o=r("forEach"),i=c("forEach");t.exports=o&&i?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"1c7e5":function(t,e,a){},"1dda":function(t,e,a){"use strict";var n=a("1c7e5"),r=a.n(n);r.a},2423:function(t,e,a){"use strict";var n=a("9efd"),r="/api/article",c={delete:function(t){return Object(n["a"])({url:"".concat(r,"/delete/").concat(t),method:"get"})},updateAll:function(t){return Object(n["a"])({url:"".concat(r,"/updateAll"),params:t,method:"get"})},query:function(t){return Object(n["a"])({url:r,params:t,method:"get"})},updateCategory:function(t,e){return Object(n["a"])({url:"".concat(r,"/updateCategory/").concat(t),params:{baseCategoryId:e},method:"get"})},addArticleToChannel:function(t,e){return Object(n["a"])({url:"".concat(r,"/addArticleToChannel/").concat(t),params:{channelId:e},method:"get"})},queryTitle:function(t){return Object(n["a"])({url:"".concat(r,"/query"),params:{title:t},method:"get"})},listByComponentsId:function(t){return Object(n["a"])({url:"".concat(r,"/listByComponentsId/").concat(t),method:"get"})},updateOrderBy:function(t,e){return Object(n["a"])({url:"".concat(r,"/updateOrderBy/").concat(t),params:{order:e},method:"get"})},pageByTagId:function(t,e){return Object(n["a"])({url:"".concat(r,"/pageByTagId/").concat(t),params:e,method:"get"})},pageDtoBy:function(t,e){return Object(n["a"])({url:"".concat(r,"/pageDtoBy/").concat(t),params:e,method:"get"})},findById:function(t){return Object(n["a"])({url:"".concat(r,"/find/").concat(t),method:"get"})},openOrCloseComment:function(t){return Object(n["a"])({url:"".concat(r,"/openOrCloseComment/").concat(t),method:"get"})},haveHtml:function(t){return Object(n["a"])({url:"".concat(r,"/haveHtml/").concat(t),method:"get"})},sendOrCancelTop:function(t){return Object(n["a"])({url:"".concat(r,"/sendOrCancelTop/").concat(t),method:"get"})},create:function(t){return Object(n["a"])({url:r,data:t,method:"post"})},saveArticle:function(t){return Object(n["a"])({url:"".concat(r,"/save"),data:t,method:"post"})},updateArticle:function(t,e){return Object(n["a"])({url:"".concat(r,"/save/").concat(t),data:e,method:"post"})},update:function(t,e){return Object(n["a"])({url:"".concat(r,"/update/").concat(t),data:e,method:"post"})},generateHtml:function(t){return Object(n["a"])({url:"".concat(r,"/generateHtml/").concat(t),method:"get"})}};e["a"]=c},4160:function(t,e,a){"use strict";var n=a("23e7"),r=a("17c2");n({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},a640:function(t,e,a){"use strict";var n=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&n((function(){a.call(null,e||function(){throw 1},1)}))}},a796:function(t,e,a){"use strict";a("99af");var n=a("9efd"),r=a("72ac"),c="/api/attachment",o={upload:function(){return"http://".concat(r["a"].baseUrl,":").concat(r["a"].port,"/api/attachment/upload")},list:function(t){return Object(n["a"])({url:c,params:t,method:"get"})}};e["a"]=o},ae40:function(t,e,a){var n=a("83ab"),r=a("d039"),c=a("5135"),o=Object.defineProperty,i={},l=function(t){throw t};t.exports=function(t,e){if(c(i,t))return i[t];e||(e={});var a=[][t],s=!!c(e,"ACCESSORS")&&e.ACCESSORS,u=c(e,0)?e[0]:l,d=c(e,1)?e[1]:void 0;return i[t]=!!a&&!r((function(){if(s&&!n)return!0;var t={length:-1};s?o(t,1,{enumerable:!0,get:l}):t[1]=1,a.call(t,u,d)}))}},b0c0:function(t,e,a){var n=a("83ab"),r=a("9bf2").f,c=Function.prototype,o=c.toString,i=/^\s*function ([^ (]*)/,l="name";!n||l in c||r(c,l,{configurable:!0,get:function(){try{return o.call(this).match(i)[1]}catch(t){return""}}})},b727:function(t,e,a){var n=a("0366"),r=a("44ad"),c=a("7b0b"),o=a("50c4"),i=a("65f0"),l=[].push,s=function(t){var e=1==t,a=2==t,s=3==t,u=4==t,d=6==t,m=5==t||d;return function(f,p,h,g){for(var v,y,b=c(f),O=r(b),k=n(p,h,3),T=o(O.length),C=0,S=g||i,P=e?S(f,T):a?S(f,0):void 0;T>C;C++)if((m||C in O)&&(v=O[C],y=k(v,C,b),t))if(e)P[C]=y;else if(y)switch(t){case 3:return!0;case 5:return v;case 6:return C;case 2:l.call(P,v)}else if(u)return!1;return d?-1:s||u?u:P}};t.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6)}},c405:function(t,e,a){"use strict";a("4160"),a("b0c0"),a("159b");var n=a("9efd"),r="/api/category",c={};function o(t,e){e.forEach((function(e){t.key===e.parentId&&(t.children||(t.children=[]),t.children.push({key:e.id,title:e.name,isLeaf:!1,scopedSlots:{title:"custom"}}))})),t.children?t.children.forEach((function(t){return o(t,e)})):t.isLeaf=!0}c.listByParent=function(t){return Object(n["a"])({url:"".concat(r,"/listByParentId/").concat(t),method:"get"})},c.list=function(){return Object(n["a"])({url:r,method:"get"})},c.listTree=function(){return Object(n["a"])({url:"".concat(r,"/listCategoryVo"),method:"get"})},c.updateAll=function(t){return Object(n["a"])({url:"".concat(r,"/updateAll"),params:t,method:"get"})},c.add=function(t){return Object(n["a"])({url:r,method:"post",data:t})},c.update=function(t,e){return Object(n["a"])({url:"".concat(r,"/update/").concat(t),method:"post",data:e})},c.findById=function(t){return Object(n["a"])({url:"".concat(r,"/find/").concat(t),method:"get"})},c.pageBy=function(t){return Object(n["a"])({url:"".concat(r,"/template/").concat(t),method:"get"})},c.recommendOrCancel=function(t){return Object(n["a"])({url:"".concat(r,"/recommendOrCancel/").concat(t),method:"get"})},c.addOrRemoveToMenu=function(t){return Object(n["a"])({url:"".concat(r,"/addOrRemoveToMenu/").concat(t),method:"get"})},c.haveHtml=function(t){return Object(n["a"])({url:"".concat(r,"/haveHtml/").concat(t),method:"get"})},c.deleteById=function(t){return Object(n["a"])({url:"".concat(r,"/delete/").concat(t),method:"get"})},c.findByCategoryDetail=function(t){return Object(n["a"])({url:"".concat(r,"/find/categoryDetail/").concat(t),method:"get"})},c.generateHtml=function(t){return Object(n["a"])({url:"".concat(r,"/generateHtml/").concat(t),method:"get"})},c.concreteTree=function(t){var e={key:0,title:"top",children:[]};return o(e,t),e.children},e["a"]=c},c621:function(t,e,a){"use strict";var n=a("9efd"),r="/api/template",c={update:function(t,e){return Object(n["a"])({url:"".concat(r,"/update/").concat(t),data:e,method:"post"})},findDetailsById:function(t){return Object(n["a"])({url:"".concat(r,"/findDetailsById/").concat(t),method:"get"})},findByType:function(t){return Object(n["a"])({url:"".concat(r,"/find/").concat(t),method:"get"})},setStatus:function(t){return Object(n["a"])({url:"".concat(r,"/setStatus/").concat(t),method:"get"})},list:function(t){return Object(n["a"])({url:r,params:t,method:"get"})},create:function(t){return Object(n["a"])({url:r,data:t,method:"post"})}};e["a"]=c},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=ArticleCategory.f2c963a9.js.map